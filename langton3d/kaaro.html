<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="description" content="Langton's Ant / Turmites in 3D with live ant management, palettes, and shareable presets.">
    <meta name="theme-color" content="#0a0c10">
    <meta name="robots" content="index,follow">

    <meta property="og:type" content="website">
    <meta property="og:title" content="Langton 3D">
    <meta property="og:description" content="3D Langton's Ant / Turmites with live management drawer, palettes, and shareable presets.">
    <meta property="og:site_name" content="Langton 3D">
    <meta property="og:image" content="/langton3d/og.png">
    <meta property="og:image:alt" content="Langton 3D preview image">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Langton 3D">
    <meta name="twitter:description" content="3D Langton's Ant / Turmites with live management drawer, palettes, and shareable presets.">
    <meta name="twitter:image" content="/langton3d/og.png">

    <link rel="icon" href="/langton3d/favicon.svg" type="image/svg+xml">
    <link rel="manifest" href="/langton3d/site.webmanifest">

    <script src="https://aframe.io/releases/0.9.1/aframe.min.js"></script>
     
    <link rel="stylesheet" href="./kaaro.css">
    <title>Langton 3D — Ants, Palettes, Presets</title>
</head>

<body>
    <a-scene id="mainFrame" background="color: black" renderer="antialias: true; alpha: true; preserveDrawingBuffer: true">
        <a-entity light="type: ambient; color: #EEE"></a-entity>
        <a-entity light="type: point; color: #FFF; intensity: 0.4" position="-1 -10 -2"></a-entity>
            
            <a-entity id="rig" position="0 0 20">
                <a-entity id="camera" camera look-controls wasd-controls="acceleration:199 fly:true adAxis:y"></a-entity>
            </a-entity>
    </a-scene>

    <div class="hud" id="hud">
        <div class="hud__bar">
            <div class="hud__title">
                <div class="hud__nameRow">
                    <div class="hud__name">Langton 3D</div>
                    <a class="hud__link" href="https://github.com/karx/kCanvas/tree/master/langton3d" target="_blank" rel="noopener noreferrer">About</a>
                </div>
                <div class="hud__hint">WASD/Arrows + mouse to move • Space pause • N step • R reset</div>
            </div>
            <div class="hud__controls">
                <button class="hud__btn" id="btn-toggle" type="button" title="Pause/Resume simulation (Space)">Pause</button>
                <button class="hud__btn" id="btn-step" type="button" title="Advance single step (N)">Step</button>
                <button class="hud__btn hud__btn--danger" id="btn-reset" type="button" title="Reset simulation (R)">Reset</button>
                <button class="hud__btn" id="btn-fullscreen" type="button" title="Toggle fullscreen">Fullscreen</button>
                <button class="hud__btn" id="btn-share" type="button" title="Copy a shareable URL preset">Share</button>
                <button class="hud__btn" id="btn-sharepanel" type="button" title="Open Share/Import panel">Share/Import</button>
                <button class="hud__btn" id="btn-snapshot" type="button" title="Share/download a snapshot image (includes preset URL)">Snapshot</button>
                <button class="hud__btn" id="btn-help" type="button" title="Help and controls (H)">Help</button>
                <label class="hud__label" title="Simulation steps per frame">
                    Speed
                    <input id="speed" type="range" min="1" max="30" value="1" />
                    <span class="hud__value" id="speedValue">1</span>
                </label>
                <div class="hud__stat" id="simStatus"></div>
            </div>
        </div>

        <aside class="drawer" id="antDrawer">
            <div class="drawer__header">
                <div class="drawer__title">Ants <span class="drawer__badge" id="antCount">0</span></div>
                <button class="hud__btn" id="btn-toggle-spawn" type="button">Add Ant</button>
            </div>

            <div class="drawer__content">
                <div class="sharePanel" id="sharePanel" aria-hidden="true">
                    <div class="panel">
                        <div class="panel__title">Share</div>
                        <div class="panel__row">
                            <input class="panel__input" id="shareUrl" type="text" readonly value="" />
                            <button class="hud__btn" id="btn-copy-share" type="button">Copy</button>
                        </div>
                        <div class="panel__row">
                            <input class="panel__input" id="loadPreset" type="text" placeholder="Paste a shared URL or ?p=..." />
                            <button class="hud__btn" id="btn-load-preset" type="button">Load</button>
                        </div>
                        <div class="panel__hint">Copy/share the URL. Paste a URL/preset to load without reloading the page.</div>
                    </div>

                    <div class="panel">
                        <div class="panel__title">Presets</div>
                        <div class="presetList" id="presetList"></div>
                    </div>
                </div>

                <div class="antList" id="antList"></div>

                <form class="spawn" id="spawnForm" autocomplete="off">
                    <div class="spawn__row">
                        <label class="spawn__label">
                            Name
                            <input class="spawn__input" id="spawnName" type="text" placeholder="Ant A" />
                        </label>
                    </div>
                    <div class="spawn__row spawn__row--grid">
                        <label class="spawn__label">
                            X
                            <input class="spawn__input" id="spawnX" type="number" value="0" />
                        </label>
                        <label class="spawn__label">
                            Y
                            <input class="spawn__input" id="spawnY" type="number" value="0" />
                        </label>
                        <label class="spawn__label">
                            Z
                            <input class="spawn__input" id="spawnZ" type="number" value="0" />
                        </label>
                        <label class="spawn__label">
                            Orientation
                            <select class="spawn__input" id="spawnOrientation">
                                <option value="5" selected>5 (XY plane)</option>
                                <option value="1">1 (YZ plane)</option>
                            </select>
                        </label>
                        <label class="spawn__label">
                            Spawn @ tick
                            <input class="spawn__input" id="spawnAtTick" type="number" value="0" min="0" />
                        </label>
                        <label class="spawn__label">
                            Colors (hex, matches rule length)
                            <input class="spawn__input" id="spawnColors" type="text" value="#12130f #5b9279 #eae6e5 #8fcb9b" />
                            <div class="spawn__help">If a cell color isn't in this palette, this ant treats it as state 0.</div>
                        </label>
                    </div>
                    <div class="spawn__row">
                        <label class="spawn__label">
                            Rule (space/comma separated)
                            <input class="spawn__input" id="spawnRule" type="text" value="L R R L" />
                        </label>
                        <div class="spawn__help">Example: <code>L R</code> or <code>L R R L</code> (states = token count)</div>
                    </div>
                    <div class="spawn__row spawn__row--actions">
                        <button class="hud__btn" id="btn-spawn" type="submit">Spawn</button>
                        <div class="spawn__error" id="spawnError" aria-live="polite"></div>
                    </div>
                </form>
            </div>
        </aside>
    </div>

    <div class="modal" id="helpModal" aria-hidden="true">
        <div class="modal__card" role="dialog" aria-modal="true" aria-labelledby="helpTitle">
            <div class="modal__header">
                <div class="modal__title" id="helpTitle">Help</div>
                <button class="hud__btn" id="btn-close-help" type="button">Close</button>
            </div>
            <div class="modal__body">
                <div class="modal__section">
                    <div class="modal__sectionTitle">Controls</div>
                    <ul class="modal__list">
                        <li>Move: WASD/Arrows + mouse look</li>
                        <li>Pause/Play: Space</li>
                        <li>Single step: N</li>
                        <li>Reset: R</li>
                        <li>Ant drawer: always visible (right)</li>
                    </ul>
                </div>
                <div class="modal__section">
                    <div class="modal__sectionTitle">Colors / State Mapping</div>
                    <div class="modal__text">
                        Cells store a shared numeric state index (for behavior) and a hex color (for display).
                        Ants interact via the shared state index; each ant's palette only controls the colors it paints.
                    </div>
                </div>
                <div class="modal__section">
                    <div class="modal__sectionTitle">Sharing</div>
                    <div class="modal__text">
                        Use Share to copy a URL that encodes the current setup (ants + palettes + spawn ticks + speed).
                        Snapshot downloads/shares an image and also copies the URL.
                    </div>
                </div>
                <label class="modal__checkbox">
                    <input type="checkbox" id="helpDontShow" />
                    Don't show on startup
                </label>
            </div>
        </div>
    </div>
    
    <script  src="./kaaro.js"></script>
</body>

</html>
